---
title: "Chapter 02: Rutherford"
author: "Andrew Zieffler"
date: "August 22, 2014"
output:
  ioslides_presentation:
    highlight: pygments
    smaller: yes
font-import: http://fonts.googleapis.com/css?family=EB+Garamond
font-family: EB+Garamond
---

## Data Entry (Excel)

Data can be entered into Excel, saved as a CSV file, and then imported into RStudio.


## Data Entry (R)

Data can also be entered directly into R using the `data.frame()` function.

```{r, tidy=FALSE}
wordRecall = data.frame(
  words.30  = c(7, 3, 6, 6, 5, 8, 6, 7),
  words.60  = c(7, 11, 9, 11, 10, 10, 11, 11),
  words.180 = c(8, 14, 10, 11, 12, 10, 11, 12)
  )

wordRecall
```

- The `Subjects` columns are omitted
- Variable (object) names in R cannot start with a number; `30s`, `60s` and `180s` are illegal


## Tidy Data

- What are "tidy" data?
- Why are our data not "tidy"?
- How would the `wordRecall` data look if it were "tidy"?


## Our Data
Cause of messiness (Wickham, 2012) is that the column headers are values, not variable names

Condition     | Value
------------- | -------------
words.30      | 7
words.30      | 3
$\vdots$      | $\vdots$
words.60      | 7
words.60      | 11
$\vdots$      | $\vdots$
words.90      | 8
words.90      | 14
$\vdots$      | $\vdots$


## Wide vs. Long Formatted Data
<div class="columns-2">
For experimental data, such as the word recall data, in the **wide** format of the data,

- Each column is a different level of the experiment. 
- Each row may contain several cases (subjects)

<br />

In the **long** (tidy) format of the data,

- Each row represents a different case (in this example a subject)
- There is *only one* variable that denotes the outcome value
- There is *only one* variable that denotes the experimental condition



<br />

```{r, echo=FALSE, message=FALSE}
library(reshape2)
melt(wordRecall, variable.name = "condition", value.name = "words")
```
</div>


## Data Preparation: Melting Data to the Long Format
The `melt()` function from the **reshape2** package can re-format the data from wide to long (tidy). The arguements are (1) the input data, and (2) any columns which are already variables

```{r, message=FALSE, tidy=FALSE}
library(reshape2)
wordRecall2 = melt(wordRecall)
head(wordRecall2, 10)
```

## Data Preparation: Renaming Variables
We can rename the variables

```{r, message=FALSE, tidy=FALSE}
names(wordRecall2) = c("condition", "words")
head(wordRecall2, 10)
```

## The `str()` Function

```{r}
str(wordRecall2)
```

Factors are how R treats categorical variables.

- Factors look like character vectors, but, are more than just a list of labels
- Factors have information stored about a pre-defined set of factor levels
- Not every factor level need be represented in the data
- Some functions treat factors in a special manner


## Data Preparation: Renaming Factor Levels
If we have a factor, we can get a vector of the factor levels using the `levels()` function.

```{r, message=FALSE, tidy=FALSE}
levels(wordRecall2$condition)
```

We can rename the factor levels by assigning new names using the `c()` function. 

```{r, message=FALSE, tidy=FALSE}
levels(wordRecall2$condition) = c("30's", "60's", "90's")
levels(wordRecall2$condition)
```

## Data Summary (Marginal Distribution)

```{r,message=FALSE}
library(psych)
describe(wordRecall2$words)
```

```{r, message=FALSE, out.width='300px', out.height='300px'}
library(sm)
sm.density(wordRecall2$words)
```


## Data Summary (Conditional Distribution)

```{r,message=FALSE}
# Needs psych library
describeBy(wordRecall2$words, wordRecall2$condition)
```


## Data Summary (Conditional Distribution)

```{r, message=FALSE, tidy=FALSE}
library(ggplot2)
ggplot(data = wordRecall2, aes(x = condition, y = words)) +
  geom_boxplot()
```



## Scatterplots (Rutherford, p. 25)

```{r, message=FALSE, tidy=FALSE}
library(ggplot2)
ggplot(data = wordRecall2, aes(x = condition, y = words)) +
  geom_point()
```

## Scatterplots (Rutherford, p. 25)

```{r, message=FALSE, tidy=FALSE, out.width='600px'}
ggplot(data = wordRecall2, aes(x = condition, y = words)) +
  geom_point(pch = 1) +
  stat_summary(fun.y = "mean", geom = "point", pch = 19, size = 4) +
  theme_bw() +
  scale_x_discrete(name = "Experimental conditions") +
  scale_y_continuous(name = "Number of words recalled", lim = c(0, 20))
```
